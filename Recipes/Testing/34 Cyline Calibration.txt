# 34 Cyline Calibration

clear()
count=1
speed=20
force=5

# Make us move at the desired grind speed even in trial!
grind_trial_speed({speed})

move_linear(start)

diam = 2000
big_loop:
# unity cal {diam}mm
set_part_geometry(CYLINDER,{diam})
unity_cyline_cal()
filename=unity2_{diam}mm

# default cal 300mm
#default_cyline_cal()
#set_part_geometry(CYLINDER,300)
#filename=default_300mm

# default cal 350mm
#default_cyline_cal()
#set_part_geometry(CYLINDER,350)
#filename=default_350mm

# unity cal 350mm
#unity_cyline_cal()
#set_part_geometry(CYLINDER,350)
#filename=from_unity_350mm

# default cal 800mm
#default_cyline_cal()
#set_part_geometry(CYLINDER,800)
#filename=default_800mm

# default cal 1100mm
#default_cyline_cal()
#set_part_geometry(CYLINDER,1100)
#filename=default_1100mm

# unity cal 1100mm
#unity_cyline_cal()
#set_part_geometry(CYLINDER,1100)
#filename=unity_1100mm

# default cal 2000mm
#default_cyline_cal()
#set_part_geometry(CYLINDER,2000)
#filename=default_2000mm

enable_cyline_cal(1)
set_cyline_training_weight(100)
set_cyline_expected_time(5.2)
set_cyline_deadband_time(0.020)

filenumber=1
repeat=3

repeat:
new_cyline_cycle()
angle=1.25
n=36
aloop:
grind_line_deg(100,{angle},{count},{speed},{force},0)
#grind_line_deg(100,{angle},{count},{speed},{force},0)
angle+=2.5
n--
jump_gt_zero(n,aloop)

write_cyline_data({filename}_{filenumber})
filenumber++

repeat--
jump_gt_zero(repeat,repeat)

diam-=100
dstop={diam}
dstop-=1900
jump_gt_zero(dstop,big_loop)

enable_cyline_cal(0)


